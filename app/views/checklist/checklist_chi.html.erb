<html>
<head>
    <title>功能1</title>
    <%= stylesheet_link_tag 'checklist', media: 'all', crossorigin: 'anonymous' %>
    <%= javascript_include_tag 'controllers/checklist', crossorigin: 'anonymous' %>
    <style>
        /* 模态框样式 */
        .modal {
            display: none; /* 默认隐藏 */
            position: fixed;
            z-index: 9999; /* 确保在顶部 */
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.5); /* 黑色背景，带透明度 */
        }

        .modal-content {
            margin: 10% auto;
            background-color: transparent; /* 透明背景 */
            border: none; /* 无边框 */
            width: 80%;
            max-width: 600px;
            padding: 20px;
            position: relative;
            text-align: center;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2); /* 可选：添加阴影以提高可见性 */
        }

        .close {
            position: absolute;
            top: 15px;
            right: 15px;
            color: #aaa;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        .close:hover,
        .close:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }

        .sample-image {
            max-width: 100%;
            height: auto;
            cursor: pointer;
        }

        /* 可选：调整模态框图像样式 */
        .modal-image {
            max-width: 100%;
            height: auto;
        }
    </style>
</head>
<body>
    <div class="container">
        <%= link_to '<', root_path, class: 'button', id: 'backButton' %>

        <!-- 进度条 -->
        <progress id="file" value="14" max="100"> 32% </progress><br><br>

        <h1>文件清单</h1>
        <p>当文件准备好时勾选框。</p>
        <%= form_with url: checklist_path, method: :post, id: 'checklistForm' do %>
            <% checklist_items = { passport: '护照', employment: '工作证明', address: '住址证明', tax: '税务居民证明', mobile: '手机拥有证明' } %>
            <% checklist_items.each do |key, label| %>
                <div class="item">
                    <div class="tooltip">
                        <!-- 带有数据属性的图像标签，用于模态框处理 -->
                        <%= image_tag("info.png", alt: label, class: 'sample-image', data: { target: "modal_#{key}" }) %>
                        <span class="tooltiptext">点击查看样本</span>
                    </div>
                    <%= label %>
                    <%= check_box_tag "checklist[#{key}]", '1', session[key.to_s] == '1', id: key, autocomplete: 'off' %>
                    <label for="<%= key %>"></label>
                </div>

                <!-- 每个图像的模态框 -->
                <div id="modal_<%= key %>" class="modal">
                    <div class="modal-content">
                        <span class="close">&times;</span>
                        <%= image_tag("#{key}.jpg", alt: label, class: 'modal-image') %>
                    </div>
                </div>
            <% end %>
            <%= submit_tag '下一步', class: 'button', id: 'nextButton' %>
        <% end %>
    </div>
</body>
</html>
